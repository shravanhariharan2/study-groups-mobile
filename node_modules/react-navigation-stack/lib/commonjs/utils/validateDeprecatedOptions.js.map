{"version":3,"sources":["validateDeprecatedOptions.tsx"],"names":["shownWarnings","validations","check","o","headerForceInset","deprecated","updated","compat","rest","safeAreaInsets","top","bottom","left","right","undefined","gesturesEnabled","gestureEnabled","header","headerShown","headerTitle","map","p","validateDeprecatedOptions","options","result","warnings","forEach","v","process","env","NODE_ENV","includes","push","length","console","warn","join"],"mappings":"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","sourcesContent":["import { EdgeInsets } from 'react-native-safe-area-context';\nimport { StackNavigationOptions } from '../vendor/types';\n\ntype Validation = {\n  check: (o: Record<string, any>) => boolean;\n  deprecated: string;\n  updated: string;\n  compat: (o: Record<string, any>) => StackNavigationOptions;\n};\n\nconst shownWarnings: string[] = [];\n\nconst validations: Validation[] = [\n  {\n    check: o => typeof o.headerForceInset === 'object',\n    deprecated: 'headerForceInset',\n    updated: 'safeAreaInsets',\n    compat: o => {\n      const { headerForceInset, ...rest } = o;\n\n      let safeAreaInsets: Partial<EdgeInsets> | undefined = {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n      };\n\n      switch (headerForceInset) {\n        case 'top':\n          delete safeAreaInsets.top;\n          break;\n        case 'bottom':\n          delete safeAreaInsets.bottom;\n          break;\n        case 'left':\n          delete safeAreaInsets.left;\n          break;\n        case 'right':\n          delete safeAreaInsets.right;\n          break;\n        case 'vertical':\n          delete safeAreaInsets.top;\n          delete safeAreaInsets.bottom;\n          break;\n        case 'horizontal':\n          delete safeAreaInsets.left;\n          delete safeAreaInsets.right;\n          break;\n        case 'always':\n          safeAreaInsets = undefined;\n          break;\n      }\n\n      return { ...rest, safeAreaInsets };\n    },\n  },\n  {\n    check: o => o.gesturesEnabled !== undefined,\n    deprecated: 'gesturesEnabled',\n    updated: 'gestureEnabled',\n    compat: o => {\n      const { gesturesEnabled, ...rest } = o;\n\n      return { ...rest, gestureEnabled: gesturesEnabled };\n    },\n  },\n  {\n    check: o => o.header === null,\n    deprecated: 'header: null',\n    updated: 'headerShown: false',\n    compat: o => {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { header, ...rest } = o;\n\n      return { ...rest, headerShown: false };\n    },\n  },\n  {\n    check: o => o.header != null && typeof o.header !== 'function',\n    deprecated: 'header: <SomeElement />',\n    updated: 'header: () => <SomeElement />',\n    compat: o => ({ ...o, header: () => o.header }),\n  },\n  {\n    check: o =>\n      o.headerTitle !== undefined &&\n      typeof o.headerTitle !== 'string' &&\n      typeof o.headerTitle !== 'function',\n    deprecated: 'headerTitle: <SomeElement />',\n    updated: 'headerTitle: () => <SomeElement />',\n    compat: o => ({ ...o, headerTitle: () => o.headerTitle }),\n  },\n  ...['headerLeft', 'headerRight', 'headerBackground', 'backImage'].map(\n    (p): Validation => ({\n      check: (o: any) => o[p] !== undefined && typeof o[p] !== 'function',\n      deprecated: `${p}: <SomeElement />`,\n      updated: `${p}: () => <SomeElement />`,\n      compat: o => ({ ...o, [p]: () => o[p] }),\n    })\n  ),\n];\n\nexport default function validateDeprecatedOptions(\n  options: StackNavigationOptions\n) {\n  let result = options;\n\n  const warnings: Validation[] = [];\n\n  // Validate options to show warnings for deprecations\n  validations.forEach(v => {\n    if (v.check(options)) {\n      result = v.compat(result);\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (shownWarnings.includes(v.deprecated)) {\n          return;\n        }\n\n        warnings.push(v);\n        shownWarnings.push(v.deprecated);\n      }\n    }\n  });\n\n  if (warnings.length) {\n    console.warn(\n      `Deprecation in 'navigationOptions':\\n${warnings\n        .map(\n          v =>\n            `- '${v.deprecated}' will be removed in a future version. Use '${v.updated}' instead`\n        )\n        .join('\\n')}`\n    );\n  }\n\n  return result;\n}\n"]}