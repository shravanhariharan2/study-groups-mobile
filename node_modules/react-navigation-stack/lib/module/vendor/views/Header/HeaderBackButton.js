import _objectSpread from"@babel/runtime/helpers/objectSpread";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";var _jsxFileName="/Users/satya/Workspace/Callstack/react-navigation-stack/src/vendor/views/Header/HeaderBackButton.tsx";import*as React from'react';import{Animated,I18nManager,Image,View,Platform,StyleSheet}from'react-native';import MaskedView from'../MaskedView';import TouchableItem from'../TouchableItem';import useTheme from'../../../utils/useTheme';export default function HeaderBackButton(_ref){var disabled=_ref.disabled,allowFontScaling=_ref.allowFontScaling,backImage=_ref.backImage,label=_ref.label,labelStyle=_ref.labelStyle,_ref$labelVisible=_ref.labelVisible,labelVisible=_ref$labelVisible===void 0?Platform.OS==='ios':_ref$labelVisible,onLabelLayout=_ref.onLabelLayout,onPress=_ref.onPress,customPressColorAndroid=_ref.pressColorAndroid,screenLayout=_ref.screenLayout,customTintColor=_ref.tintColor,titleLayout=_ref.titleLayout,_ref$truncatedLabel=_ref.truncatedLabel,truncatedLabel=_ref$truncatedLabel===void 0?'Back':_ref$truncatedLabel;var _useTheme=useTheme(),dark=_useTheme.dark,colors=_useTheme.colors;var _React$useState=React.useState(undefined),_React$useState2=_slicedToArray(_React$useState,2),initialLabelWidth=_React$useState2[0],setInitialLabelWidth=_React$useState2[1];var tintColor=customTintColor!==undefined?customTintColor:Platform.select({ios:colors.primary,default:colors.text});var pressColorAndroid=customPressColorAndroid!==undefined?customPressColorAndroid:dark?'rgba(255, 255, 255, .32)':'rgba(0, 0, 0, .32)';var handleLabelLayout=function handleLabelLayout(e){onLabelLayout==null?void 0:onLabelLayout(e);setInitialLabelWidth(e.nativeEvent.layout.x+e.nativeEvent.layout.width);};var shouldTruncateLabel=function shouldTruncateLabel(){return!label||initialLabelWidth&&titleLayout&&screenLayout&&(screenLayout.width-titleLayout.width)/2<initialLabelWidth+26;};var renderBackImage=function renderBackImage(){if(backImage){return backImage({tintColor:tintColor});}else{return React.createElement(Image,{style:[styles.icon,Boolean(labelVisible)&&styles.iconWithLabel,Boolean(tintColor)&&{tintColor:tintColor}],source:require('../assets/back-icon.png'),fadeDuration:0,__source:{fileName:_jsxFileName,lineNumber:75}});}};var renderLabel=function renderLabel(){var leftLabelText=shouldTruncateLabel()?truncatedLabel:label;if(!labelVisible||leftLabelText===undefined){return null;}var labelElement=React.createElement(View,{style:screenLayout?[styles.labelWrapper,{minWidth:screenLayout.width/2-27}]:null,__source:{fileName:_jsxFileName,lineNumber:96}},React.createElement(Animated.Text,{accessible:false,onLayout:leftLabelText===label?handleLabelLayout:undefined,style:[styles.label,tintColor?{color:tintColor}:null,labelStyle],numberOfLines:1,allowFontScaling:!!allowFontScaling,__source:{fileName:_jsxFileName,lineNumber:105}},leftLabelText));if(backImage||Platform.OS!=='ios'){return labelElement;}return React.createElement(MaskedView,{maskElement:React.createElement(View,{style:styles.iconMaskContainer,__source:{fileName:_jsxFileName,lineNumber:134}},React.createElement(Image,{source:require('../assets/back-icon-mask.png'),style:styles.iconMask,__source:{fileName:_jsxFileName,lineNumber:135}}),React.createElement(View,{style:styles.iconMaskFillerRect,__source:{fileName:_jsxFileName,lineNumber:139}})),__source:{fileName:_jsxFileName,lineNumber:132}},labelElement);};var handlePress=function handlePress(){return onPress&&requestAnimationFrame(onPress);};return React.createElement(TouchableItem,{disabled:disabled,accessible:true,accessibilityRole:"button",accessibilityComponentType:"button",accessibilityLabel:label&&label!=='Back'?label+", back":'Go back',accessibilityTraits:"button",testID:"header-back",delayPressIn:0,onPress:disabled?undefined:handlePress,pressColor:pressColorAndroid,style:[styles.container,disabled&&styles.disabled],hitSlop:Platform.select({ios:undefined,default:{top:16,right:16,bottom:16,left:16}}),borderless:true,__source:{fileName:_jsxFileName,lineNumber:151}},React.createElement(React.Fragment,{__source:{fileName:_jsxFileName,lineNumber:171}},renderBackImage(),renderLabel()));}var styles=StyleSheet.create({container:_objectSpread({alignItems:'center',flexDirection:'row'},Platform.select({ios:null,default:{marginVertical:3,marginHorizontal:11}})),disabled:{opacity:0.5},label:{fontSize:17,letterSpacing:0.35},labelWrapper:{flexDirection:'row',alignItems:'flex-start'},icon:Platform.select({ios:{height:21,width:13,marginLeft:8,marginRight:22,marginVertical:12,resizeMode:'contain',transform:[{scaleX:I18nManager.isRTL?-1:1}]},default:{height:24,width:24,margin:3,resizeMode:'contain',transform:[{scaleX:I18nManager.isRTL?-1:1}]}}),iconWithLabel:Platform.OS==='ios'?{marginRight:6}:{},iconMaskContainer:{flex:1,flexDirection:'row',justifyContent:'center'},iconMaskFillerRect:{flex:1,backgroundColor:'#000'},iconMask:{height:21,width:13,marginLeft:-14.5,marginVertical:12,alignSelf:'center',resizeMode:'contain',transform:[{scaleX:I18nManager.isRTL?-1:1}]}});
//# sourceMappingURL=HeaderBackButton.js.map